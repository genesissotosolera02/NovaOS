#!/bin/bash
set -e

# Directorios df 
WORKDIR="$HOME/novaos"
ISO_DIR="$WORKDIR/iso-build"
OUTPUT="$WORKDIR/novaos.iso"

# Asegurarse de que existe el directorio iso-build
if [ ! -d "$ISO_DIR" ]; then
    echo "‚ùå No existe $ISO_DIR. Debes ejecutar el script principal primero."
    exit 1
fi

echo "üöÄ Generando ISO desde $ISO_DIR..."

# Crear ISO con xorriso
xorriso -as mkisofs \
  -r -J -V "NOVAOS" \
  -b isolinux/isolinux.bin \
  -c isolinux/boot.cat \
  -no-emul-boot -boot-load-size 4 -boot-info-table \
  -isohybrid-mbr /usr/lib/ISOLINUX/isohdpfx.bin \
  -eltorito-alt-boot \
  -e boot/grub/efi.img \
  -no-emul-boot -isohybrid-gpt-basdat \
  -o "$OUTPUT" "$ISO_DIR"

echo "‚úÖ ISO generada: $OUTPUT"
